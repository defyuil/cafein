<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "https://mybatis.org/dtd/mybatis-3-mapper.dtd">

<!-- SalesMapper.xml -->
<mapper namespace="com.cafein.mapper.SalesMapper">

<!-- 수주 등록 -->
<insert id="registPO" parameterType="com.cafein.domain.SalesVO">
     INSERT INTO purchaseorder (postate, pocode, clientid, itemid, pocnt, ordersdate, updatedate, ordersduedate, membercode)
    VALUES (
        #{postate},
        #{pocode},
        (SELECT clientid FROM client WHERE client_identifier = #{clientIdentifier}),
        (SELECT itemid FROM item WHERE item_identifier = #{itemIdentifier}),
        #{pocnt},
        #{ordersdate},
        #{updatedate},
        #{ordersduedate},
        #{membercode}
    )
</insert>

<select id="clipick" parameterType="com.cafein.domain.ClientVO">
    select clientid, clientname, clientcode from client
</select></select>

<!-- 수주 조회 -->
<select id="getPOList" resultType="com.cafein.domain.SalesVO">
	SELECT  po.poid, po.postate, po.pocode, cli.clientname, cli.clientcode, item.itemname, item.itemcode,
    po.ordersdate, po.updatedate, po.ordersduedate, po.membercode
    FROM purchaseorder po
    JOIN item ON po.itemid = item.itemid
    JOIN client cli ON po.clientid = cli.clientid
</select>






</mapper>